<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Help.Bettermeans - Multiple SSH keys</title>
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="/css/print.css" type="text/css" media="print">
  </head>

  <body>
    
      
        <script type="text/javascript">var main_category = "other"</script>
      
    
    <div id="main">
      <div id="header" class="basic">
        <div class="site">
          <div class="logo boring">
            <a href="/"><img src="/images/help.github.png" alt="bettermeans learn logo" /></a>
          </div>
          <div class="topsearch">
            <ul class="nav logged_out">
              <!-- <li><a href="http://gitref.org/">Git Reference</a></li>
              <li><a href="http://bettermeans.com/bettermeans/help.bettermeans.com#readme">Contribute</a></li>
              <li><a href="http://support.bettermeans.com/">Support</a></li> -->
              <li><a href="http://bettermeans.com/">Back to Bettermeans</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div id="content" class="site">
        <div id="guides">
          <div class="guide">
            <div class="main">
              <h1>Multiple SSH keys</h1>

              <div class="wikistyle">
                <p>This guide assumes you have already created two keypairs and attached them to different GitHub user accounts. For this example we will be using <code>~/.ssh/id_rsa</code> attached to the user <code>joe</code> and <code>~/.ssh/id_rsa_client</code> attached to the user <code>client</code>.</p>

<h1 id='adding_your_keys_to_ssh'>Adding your keys to SSH</h1>

<p>The first keypair, <code>~/.ssh/id_rsa</code>, uses a default name, so we don&#8217;t need to do anything special to make SSH use this pair. The second pair, however, is not a default name. Therefore, we need to tell ssh about it so that it can use it:</p>
<pre class='terminal'>ssh-add ~/.ssh/id_rsa_client</pre>
<p>If the keypair has a passphrase on it (it should!), <code>ssh-add</code> will ask you to enter the passphrase. After you have done this, the key will be available from ssh-agent so you won&#8217;t have to re-enter the passphrase every time you use it.</p>

<h1 id='configuring_ssh'>Configuring SSH</h1>

<p>Once SSH has access to both keys, you need to tell it which key to use for which server. In most cases you can assume that SSH will fall back to <code>~/.ssh/id_rsa</code> by default, but we&#8217;re going to force it anyway. To begin, open <code>~/.ssh/config</code> in your favorite editor.</p>
<div>
  <pre>
    <code class='bash'># Default GitHub user (joe)
Host github.com
  HostName github.com
  User git
  IdentityFile /Users/joe/.ssh/id_rsa

# Client user (client)
Host github-client
  HostName github.com
  User git
  IdentityFile /Users/joe/.ssh/id_rsa_client</code>
  </pre>
</div>
<p>In short what this does is tells SSH to use the client key when connecting to the server github-client, which is really github.com.</p>

<h1 id='using_the_second_key'>Using the second key</h1>

<p>From here on, everything is the same as everyday use except for one component, the domain name. When working on a repo owned by the primary account, we would use a command like:</p>
<pre class='terminal'>git clone git@github.com:joe/my_repo.git</pre>
<p>When we want to use the second account&#8217;s key, however, we need to change the domain name. Doing so will use the settings in <code>~/.ssh/config</code> to override the defaults.</p>
<pre class='terminal'>git clone git@github-client:client/his_repo.git</pre>
              </div>
            </div>

            <div class="sidebar">
              
                <h3>Getting started</h3>
                  <ul id="categories">
                    
                  </ul>
              
                <h3>Guides</h3>
                  <ul id="categories">
                    
                      
                        <li><a href="/voting" id="guides">Dashboard</a></li>
                      
                    
                  </ul>
              
                <h3>Faq</h3>
                  <ul id="categories">
                    
                  </ul>
              
                <h3>Popular</h3>
                  <ul id="categories">
                    
                      
                        <li><a href="/forking" id="popular">Forking a project</a></li>
                      
                    
                      
                        <li><a href="/key-setup-redirect" id="popular">Generating SSH keys</a></li>
                      
                    
                      
                        <li><a href="/troubleshooting-common-issues" id="popular">Common issues and questions</a></li>
                      
                    
                      
                        <li><a href="/troubleshooting-ssh" id="popular">Troubleshooting SSH issues</a></li>
                      
                    
                      
                        <li><a href="/git-email-settings" id="popular">Setting user name, email and GitHub token</a></li>
                      
                    
                      
                        <li><a href="/removing-sensitive-data" id="popular">Removing sensitive data</a></li>
                      
                    
                      
                        <li><a href="/voting" id="popular">Dashboard</a></li>
                      
                    
                  </ul>
              
            </div>
          </div>
        </div>
      </div>
      <div class="push"></div>
    </div>

    <div id="footer">
      <div class="site">

        <div class="info">
          <div class="links">
            <a href="http://bettermeans.org/front/?cat=3"><b>Blog</b></a> |
            <a href="http://bettermeans.org/front/?page_id=284">Contact</a> |
            <a href="http://twitter.com/bettermeans">Twitter</a> |
            <a href="http://bettermeans.com/front/user_agreement.html">Terms of Service</a> | 
            <a href="http://bettermeans.com/front/privacy.html">Privacy Policy</a>
          </div>
          <div class="company">
           &copy;&copy;
            2010
            Bettermeans LLC.
            <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/" rel="license">
            Creative Commons Attribution-Noncommercial-Share Alike 3.0 License</a>
           
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
