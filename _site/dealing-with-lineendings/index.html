<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Help.Bettermeans - Dealing with line endings</title>
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="/css/print.css" type="text/css" media="print">
  </head>

  <body>
    
      <script type="text/javascript">var main_category = "windows"</script>
    
    <div id="main">
      <div id="header" class="basic">
        <div class="site">
          <div class="logo boring">
            <a href="/"><img src="/images/help.github.png" alt="bettermeans learn logo" /></a>
          </div>
          <div class="topsearch">
            <ul class="nav logged_out">
              <!-- <li><a href="http://gitref.org/">Git Reference</a></li>
              <li><a href="http://bettermeans.com/bettermeans/help.bettermeans.com#readme">Contribute</a></li>
              <li><a href="http://support.bettermeans.com/">Support</a></li> -->
              <li><a href="http://bettermeans.com/">Back to Bettermeans</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div id="content" class="site">
        <div id="guides">
          <div class="guide">
            <div class="main">
              <h1>Dealing with line endings</h1>

              <div class="wikistyle">
                <p>Line endings&#8230; the scourge of every Windows-based developer that tries to mingle with linux- or mac-based developers.  Though most modern text editors can handle both newline types without issue, git is not as graceful.</p>
<p>For more info on the issue see <a href="http://en.wikipedia.org/wiki/Newline">Wikipedia</a>.</p>
<h2>Mac and Linux users, you don&#8217;t get to sit this one out</h2>
<p>Although you might think you&#8217;re immune to <span class="caps">CRLF</span>-ended files on mac and linux, you are not.  It is possible to download files from an external source that use <span class="caps">CRLF</span>, and thus commit them into your repo.  To be safe, you should set your config to convert line endings on commit so they are always LF in the repo:</p>
<pre class="terminal">$ git config --global core.autocrlf input</pre>
<h2>I just cloned and git says files have changed!</h2>
<p>So, you just cloned a repo on a Windows box, and it says that all of your files have been modified.  Huh?  You&#8217;ve not touched anything yet!  What the&#8230;</p>
<p>The problem is that your <code>core.autocrlf</code> option is likely not enabled.  This setting tells git to convert the newlines to the system&#8217;s standard when checking out files, and to LF newlines when committing in.  To turn it on use this command:</p>
<pre class="terminal">$ git config --global core.autocrlf true</pre>
<p>Once this is set, you need to reset your repos. The best way to do this is wipe out your working tree (all the files except the .git directory) and then restore them:</p>
<pre class="terminal"># Remove everything from the index
$ git rm --cached -r .

# Re-add all the deleted files to the index
# You should get lots of messages like: "warning: CRLF will be replaced by LF in &lt;file&gt;."
$ git diff --cached --name-only -z | xargs -0 git add

# Commit
$ git commit -m "Fix CRLF"

# If you're doing this on a Unix/Mac OSX clone then optionally remove
# the working tree and re-check everything out with the correct line endings.
$ git ls-files -z | xargs -0 rm
$ git checkout .
</pre>
<p style="padding-left:1em;"><em>Thanks to Charles Bailey&#8217;s post on <a href="http://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273#1511273">stack<b>overflow</b></a> for this solution.</em></p>
<h2>Moving forward</h2>
<p>Now that you&#8217;ve standardized the newlines in your repo things should be better.  However, every person that touches your repo should turn autocrlf on, even non-Windows users.  It is possible for them to bring in code from an outside source that has <span class="caps">CRLF</span> newlines, and you don&#8217;t want them saved into the repo like that.</p>
<p>For more details on the <code>core.autocrlf</code> setting see the <a href="http://www.kernel.org/pub/software/scm/git/docs/git-config.html">git-config documentation</a>.</p>
              </div>
            </div>

            <div class="sidebar">
              
                <h3>Getting started</h3>
                  <ul id="categories">
                    
                  </ul>
              
                <h3>Guides</h3>
                  <ul id="categories">
                    
                      
                        <li><a href="/voting" id="guides">Dashboard</a></li>
                      
                    
                  </ul>
              
                <h3>Faq</h3>
                  <ul id="categories">
                    
                  </ul>
              
                <h3>Popular</h3>
                  <ul id="categories">
                    
                      
                        <li><a href="/forking" id="popular">Forking a project</a></li>
                      
                    
                      
                        <li><a href="/key-setup-redirect" id="popular">Generating SSH keys</a></li>
                      
                    
                      
                        <li><a href="/troubleshooting-common-issues" id="popular">Common issues and questions</a></li>
                      
                    
                      
                        <li><a href="/troubleshooting-ssh" id="popular">Troubleshooting SSH issues</a></li>
                      
                    
                      
                        <li><a href="/git-email-settings" id="popular">Setting user name, email and GitHub token</a></li>
                      
                    
                      
                        <li><a href="/removing-sensitive-data" id="popular">Removing sensitive data</a></li>
                      
                    
                      
                        <li><a href="/voting" id="popular">Dashboard</a></li>
                      
                    
                  </ul>
              
            </div>
          </div>
        </div>
      </div>
      <div class="push"></div>
    </div>

    <div id="footer">
      <div class="site">

        <div class="info">
          <div class="links">
            <a href="http://bettermeans.org/front/?cat=3"><b>Blog</b></a> |
            <a href="http://bettermeans.org/front/?page_id=284">Contact</a> |
            <a href="http://twitter.com/bettermeans">Twitter</a> |
            <a href="http://bettermeans.com/front/user_agreement.html">Terms of Service</a> | 
            <a href="http://bettermeans.com/front/privacy.html">Privacy Policy</a>
          </div>
          <div class="company">
           &copy;&copy;
            2010
            Bettermeans LLC.
            <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/" rel="license">
            Creative Commons Attribution-Noncommercial-Share Alike 3.0 License</a>
           
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
